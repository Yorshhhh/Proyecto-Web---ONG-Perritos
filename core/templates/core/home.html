{% extends 'core/base.html' %}
{% load static %}
{% block css %}
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
{% endblock %}

{% block javascript %} 

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
  integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
  crossorigin="anonymous">
</script>

<script>
    $(document).ready(function () {
        $("#enviar").click(function () {
            //URL BASE DE LA API
            var base = "http://api.weatherstack.com/current?";
            //LLAVE DE ACCESO WEATHERSTACK
            var access_key = "access_key=c3c6513ed481c01a5de9d6482b3af720";
            //CIUDAD A BUSCAR
            var city = $("#city").val();
            console.log("ciudad = " + city);
            //SE AGREGA LA CIUDAD A BUSCAR A LA CONSULTA HACIA LA API
            var query = "&query=" + city;
            //URL FINAL PARA REALIZAR LA CONSULTA A LA API
            var url = base + access_key + query;

            $.get(url, function (data) {
                var msg = "<tr>";
                msg += "<td>" + data.location.name + ", " + data.location.region + " " + data.location.country + "</td>";
                msg += "<td><img width=32px src=" + data.current.weather_icons + "> " + data.current.temperature + "°C" + "</td>";
                msg += "<td>" + data.current.wind_speed + " Km/h" + "</td>";
                msg += "<td>" + data.current.humidity + " %" + "</td>";
                msg += "</tr>"
                // agrega a tabla id="categorias" linea con la data
                $("#categorias").append(msg);
            })
        })
    })
</script>

{% endblock %}

{% block contenido %} 

<div id="cuenta" class="row">
    <div class="row col-2">
        <h2>OBSERVE EL CLIMA</h2>
        <input type="text" name="city" id="city" placeholder="Ingrese una ciudad">
        <button type="button" class="btn btn-primary" id="enviar">Traer datos</button>
    </div>
    <div class="col-8">
        <table class="table" id="categorias">
            <thead>
                <tr>
                    <th scope="col">Ubicacion</th>
                    <th scope="col">Temperatura</th>
                    <th scope="col">Velocidad viento</th>
                    <th scope="col">Humedad</th>
                </tr>
            </thead>
            <tbody>
            </tbody>
        </table>
    </div>
   
    <!------CARRUSEL1------->
    <div id="carruselFade" class="container justify-content">
        <h1>NUESTROS MEJORES PRODUCTOS</h1>
        <div id="carousel" class="carousel slide carousel-fade" data-bs-ride="carousel">
            <!-- ITEMS DEL CARRUSEL -->
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="{% static 'core/'%}img/img/fotos index/carrusel1.jpg" style="width:640px;height:360px" class="d-block w-100"
                        alt="...">
                </div>
                <div class="carousel-item">
                    <img src="{% static 'core/'%}img/img/fotos index/carrusel2.jpg" style="width:640px;height:360px" class="d-block w-100"
                        alt="...">
                </div>
                <div class="carousel-item">
                    <img src="{% static 'core/'%}img/img/fotos index/carrusel3.jpg" style="width:640px;height:360px" class="d-block w-100"
                        alt="...">
                </div>
            </div>
            <!-- BOTONES DEL CARRUSEL -->
            <button class="carousel-control-prev" type="button" data-bs-target="#carousel" data-bs-slide="prev">
                <span id="btnAtrasCarrusel1" class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carousel" data-bs-slide="next">
                <span id="btnSiguienteCarrusel1" class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
    </div>
    <br>
    <!-- LEAD UTILIDADES Y PAGOS -->
    <div id="utilidades" class="container">
        <div id="columnas" class="row">
            <div class="col">
                <img src="{% static 'core/'%}img/img/fotos index/png1.png" class="img-thumbnail" alt="...">
                <h3>CANCELA CON TODO MEDIO DE PAGO</h3>
                <img src="{% static 'core/'%}img/img/fotos index/mediosdepago.jpg" width="300" height="300" alt="">
            </div>
            <div class="col">
                <img src="{% static 'core/'%}img/img/fotos index/mapa.png" class="img-thumbnail" alt="">
                <h3>ENCUENTRANOS</h3>
                <iframe
                    src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3194.967443053008!2d-73.06476148493229!3d-36.79533097994958!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x9669b4503c9a1735%3A0x3fc32996839e6986!2sDuoc%20UC%3A%20Sede%20San%20Andr%C3%A9s%20De%20Concepci%C3%B3n!5e0!3m2!1ses-419!2scl!4v1650916032802!5m2!1ses-419!2scl"
                    width="300" height="300" style="border: 1px;" allowfullscreen="" loading="lazy"
                    referrerpolicy="no-referrer-when-downgrade">
                </iframe>
            </div>
            <div class="col">
                <img src="{% static 'core/'%}img/img/fotos index/Camion-002.jpg" class="img-thumbnail" alt="">
                <h3>ENVÍOS A TODO EL PAIS</h3>
                <img src="{% static 'core/'%}img/img/fotos index/mapachile.png" width="300" height="300" alt="">
            </div>
        </div>
    </div>
    <br>

{% endblock %}